<?xml version="1.0" encoding="utf-8"?>
<project name="Flex TreeMap" default="build-all" basedir=".">

	<property file="./build.properties"/>
	
	<target name="build-all" depends="properties,build-lib,build-docs,build-examples"/>
	
	<target name="properties">
		<fail unless="asdoc">The "asdoc" property must be set in build.properties.</fail>
		<fail unless="compc">The "compc" property must be set in build.properties.</fail>
		<fail unless="mxmlc">The "mxmlc" property must be set in build.properties.</fail>
	</target>
	
	<target name="build-lib">
	    <exec executable="${compc}" dir="${basedir}" failonerror="true">
			<arg line="--namespace http://www.flextoolbox.com/2006/mxml manifest.xml"/>
			<arg line="--source-path '${source.dir}'"/>
			<arg line="--include-classes+=com.flextoolbox.controls.treeMapClasses.SliceAndDice"/>
			<arg line="--include-namespaces http://www.flextoolbox.com/2006/mxml"/>
			<arg line="--output '${build.dir}/${library.name}.swc'"/>
	    </exec>
	</target>
	
	<target name="build-docs">
		<exec executable="${asdoc}" dir="${basedir}" failonerror="true">
			<arg line="--doc-sources '${source.dir}'"/>
			<arg line="--output '${docs.dir}'"/>
		</exec>
	</target>
	
	<target name="build-examples">
		<exec executable="${mxmlc}" dir="${basedir}/examples/GettingStarted" failonerror="true">
			<arg line="--library-path+='${build.dir}/${library.name}.swc'"/>
			<arg line="GettingStarted.mxml"/>
		</exec>
		
		<exec executable="${mxmlc}" dir="${basedir}/examples/LayoutModes" failonerror="true">
			<arg line="--library-path+='${build.dir}/${library.name}.swc'"/>
			<arg line="LayoutModes.mxml"/>
		</exec>
		
		<exec executable="${mxmlc}" dir="${basedir}/examples/TextModes" failonerror="true">
			<arg line="--library-path+='${build.dir}/${library.name}.swc'"/>
			<arg line="TextModes.mxml"/>
		</exec>
	</target>
	
	<target name="package">
	</target>
	
</project>